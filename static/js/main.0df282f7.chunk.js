(this.webpackJsonprelpo=this.webpackJsonprelpo||[]).push([[0],{47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},54:function(e,t,n){},56:function(e,t,n){},61:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),s=n(23),r=n.n(s),i=(n(47),n(10)),l=(n(48),n(49),{appName:"Relpo"}),o=n(11),d=n.n(o),u=n(16),j=n(38).a.initializeApp({apiKey:"AIzaSyBsdIYSBkCehCj5krwFqFjEMAN_xz_VIvs",authDomain:"relpo-88360.firebaseapp.com",projectId:"relpo-88360",storageBucket:"relpo-88360.appspot.com",messagingSenderId:"10108693366",appId:"1:10108693366:web:5525d64140ffb296d2a857",measurementId:"G-66J2YL6KVW"});n(51);function b(){return(b=Object(u.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.auth().createUserWithEmailAndPassword(t,n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=Object(u.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.auth().signInWithEmailAndPassword(t,n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return O.apply(this,arguments)}function O(){return(O=Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.auth().signOut();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x=n(2);function m(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),r=Object(i.a)(s,2),o=r[0],d=r[1];return Object(x.jsx)("div",{className:"section1",children:Object(x.jsx)("div",{className:"container",id:"base",children:Object(x.jsxs)("div",{className:"row-fluid ",children:[Object(x.jsx)("div",{className:"col-fluid text-center",children:Object(x.jsx)("h3",{className:"display-1",children:l.appName})}),Object(x.jsx)("br",{}),Object(x.jsx)("div",{className:"row-fluid",children:Object(x.jsx)("div",{className:"col-fluid",children:Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==o&&function(e,t){return h.apply(this,arguments)}(n,o).then((function(){console.log("DONE")}))},children:[Object(x.jsxs)("div",{className:"mb-3",children:[Object(x.jsx)("label",{htmlFor:"exampleInputEmail1",className:"form-label",children:"Email address"}),Object(x.jsx)("input",{value:n,onChange:function(e){a(e.target.value)},type:"email",className:"form-control bg-dark",id:"exampleInputEmail1","aria-describedby":"emailHelp"})]}),Object(x.jsxs)("div",{className:"mb-3",children:[Object(x.jsx)("label",{htmlFor:"exampleInputPassword1",className:"form-label",children:"Password"}),Object(x.jsx)("input",{onChange:function(e){d(e.target.value)},value:o,type:"password",className:"form-control bg-dark",id:"exampleInputPassword1"})]}),Object(x.jsx)("button",{type:"submit",className:"btn btn-outline-dark mt-3",id:"loginb",children:"Login"})]})})})]})})})}n(54);var f=n(36),v=n(21),N=(n(68),{name:"",email:"",phone:-1,uuid:"",ridesJoined:[],ridesHosted:[]});function g(){return(g=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.firestore().collection("users").add(Object(v.a)(Object(v.a)({},N),t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(u.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.firestore().collection("users").where("email","==",t).get();case 2:if(!(n=e.sent)||n.empty||1!==n.docs.length||!n.docs[0].exists){e.next=7;break}return e.abrupt("return",n.docs[0]);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(u.a)(d.a.mark((function e(t){var n,c,a,s,r,i,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,c=t.ridersCount,a=t.city,s=t.lat,r=t.long,i=t.uuid,l=t.host,t.participants,console.log(l),e.next=4,j.firestore().collection("rides").add({name:n,ridersCount:c,city:a,lat:s,long:r,uuid:i,host:l});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return C.apply(this,arguments)}function C(){return(C=Object(u.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.firestore().collection("users").doc(t).get();case 2:if(!(n=e.sent).exists){e.next=7;break}return e.abrupt("return",n.data());case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t,n){return S.apply(this,arguments)}function S(){return(S=Object(u.a)(d.a.mark((function e(t,n,c){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.firestore().collection("users").doc(t.uuid).update(c?{ridesHosted:[].concat(Object(f.a)(t.ridesHosted),[n])}:{ridesJoined:[].concat(Object(f.a)(t.ridesJoined),[n])});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),r=Object(i.a)(s,2),o=r[0],d=r[1],u=Object(c.useState)(""),j=Object(i.a)(u,2),h=j[0],p=j[1],O=Object(c.useState)(""),m=Object(i.a)(O,2),f=m[0],v=m[1],N=Object(c.useState)(""),y=Object(i.a)(N,2),w=y[0],k=y[1];return Object(x.jsx)("div",{className:"section1",children:Object(x.jsx)("div",{className:"container",id:"base",children:Object(x.jsxs)("div",{className:"row-fluid ",children:[Object(x.jsx)("div",{className:"col-fluid text-center",children:Object(x.jsx)("h3",{className:"display-1",children:l.appName})}),Object(x.jsx)("br",{}),Object(x.jsx)("div",{className:"row-fluid",children:Object(x.jsx)("div",{className:"col-fluid",children:Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault(),function(e){return g.apply(this,arguments)}({email:n,name:f,phone:w}).then((function(){!function(e,t){b.apply(this,arguments)}(n,o)}))},children:[Object(x.jsxs)("div",{className:"mb-3",children:[Object(x.jsx)("label",{htmlFor:"exampleInputPassword1",className:"form-label",children:"Name"}),Object(x.jsx)("input",{onChange:function(e){v(e.target.value)},value:f,type:"text",className:"form-control bg-dark",placeholder:"Name",id:"exampleInputPassword1"})]}),Object(x.jsxs)("div",{className:"mb-3",children:[Object(x.jsx)("label",{htmlFor:"exampleInputEmail1",className:"form-label",children:"Email address"}),Object(x.jsx)("input",{value:n,onChange:function(e){a(e.target.value)},type:"email",className:"form-control bg-dark",placeholder:"Email address",id:"exampleInputEmail1","aria-describedby":"emailHelp"})]}),Object(x.jsxs)("div",{className:"mb-3",children:[Object(x.jsx)("label",{htmlFor:"exampleInputPassword1",className:"form-label",children:"Phone"}),Object(x.jsx)("input",{onChange:function(e){k(e.target.value)},value:w,type:"password",className:"form-control bg-dark",placeholder:"Phone",id:"exampleInputPassword1"})]}),Object(x.jsxs)("div",{className:"mb-3",children:[Object(x.jsx)("label",{htmlFor:"exampleInputPassword1",className:"form-label",children:"Password"}),Object(x.jsx)("input",{onChange:function(e){d(e.target.value)},value:o,type:"password",className:"form-control bg-dark",placeholder:"Password",id:"exampleInputPassword1"})]}),Object(x.jsxs)("div",{className:"mb-3",children:[Object(x.jsx)("label",{htmlFor:"exampleInputPassword1",className:"form-label",children:"Retype Password"}),Object(x.jsx)("input",{onChange:function(e){p(e.target.value)},value:h,type:"password",className:"form-control bg-dark",placeholder:"Retype Password",id:"exampleInputPassword1"})]}),Object(x.jsx)("button",{type:"submit",className:"btn btn-outline-dark mt-3",id:"loginb",children:"Signup"})]})})})]})})})}var E=n(33),H=n(12),F=(n(56),{signUp:"/sign-up",logIn:"/login",dashBoard:"/dashboard"});function B(){var e=Object(H.g)();return Object(x.jsx)("div",{className:"section1 min-vh-100 w-100 d-flex align-items-center",children:Object(x.jsx)("div",{className:"container",id:"base",children:Object(x.jsxs)("div",{className:"row-fluid text-center",children:[Object(x.jsxs)("div",{className:"col-fluid",children:[Object(x.jsx)("h1",{className:"display-3",children:"Welcome To "}),Object(x.jsx)("h3",{className:"display-1",children:l.appName})]}),Object(x.jsx)("br",{}),Object(x.jsxs)("div",{className:"row-fluid",children:[Object(x.jsx)("div",{className:"col-fluid",children:Object(x.jsx)("button",{onClick:function(){e.push(F.logIn)},type:"button",className:"btn btn-outline-dark",id:"loginb",children:"Login"})}),Object(x.jsx)("br",{}),Object(x.jsx)("div",{className:"col-fluid",children:Object(x.jsx)("button",{onClick:function(){e.push(F.signUp)},type:"button",className:"btn btn-dark",id:"signupb",children:"Signup"})})]})]})})})}var M=n(41),R=Object(c.createContext)([void 0,null]);function L(){return Object(c.useContext)(R)}function D(e){var t=e.children,n=Object(c.useState)(void 0),a=Object(i.a)(n,2),s=a[0],r=a[1];return Object(c.useEffect)((function(){j.auth().onAuthStateChanged((function(e){e&&e.email?function(e){return y.apply(this,arguments)}(e.email).then((function(e){r(null===e?null:Object(v.a)(Object(v.a)({},e.data()),{},{uuid:e.id}))})):r(null)}))}),[]),Object(x.jsx)(R.Provider,{value:[s,r],children:t})}n(61);var J=n(72),A=n(73),G=n(75),T=n(74);function U(e){var t=e.ride;return Object(x.jsx)("button",{type:"button",className:"btn btn-warningnpm mt-3",children:Object(x.jsx)("div",{className:"card mb-3",children:Object(x.jsxs)("div",{className:"row g-0",children:[Object(x.jsx)("div",{className:"col-md-4 d-flex justify-content-center align-content-center",children:Object(x.jsx)("img",{src:"https://source.unsplash.com/2000x2000/?cycle,bike",alt:"...",className:"img-fluid"})}),Object(x.jsx)("div",{className:"col-md-8",children:Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsxs)("h5",{className:"card-title",children:[t.name," Ride"]}),Object(x.jsx)("p",{className:"card-text",children:Object(x.jsx)("table",{className:"table",children:Object(x.jsxs)("tbody",{children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:"Distance"})}),Object(x.jsxs)("td",{children:[t.distance.toFixed(),"km"]})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:"Riders"})}),Object(x.jsx)("td",{children:t.ridersCount})]})]})})})]})})]})})})}function W(e){var t=e.ride,n=e.closeRideInfo,c=L(),a=Object(i.a)(c,1)[0];return Object(x.jsx)("div",{className:"card mb-3",children:Object(x.jsxs)("div",{className:"row g-0",children:[Object(x.jsx)("div",{className:"col-md-4 d-flex justify-content-center align-content-center",children:Object(x.jsx)("img",{src:"https://source.unsplash.com/2000x2000/?cycle,bike",alt:"...",className:"img-fluid"})}),Object(x.jsx)("div",{className:"col-md-8",children:Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)("h5",{className:"card-title",children:t.name}),Object(x.jsxs)("p",{className:"card-text",children:[Object(x.jsx)("table",{className:"table",children:Object(x.jsxs)("tbody",{children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:"Distance"})}),Object(x.jsxs)("td",{children:[t.distance.toFixed(),"m"]})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:"Riders"})}),Object(x.jsx)("td",{children:t.ridersCount})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:"City"})}),Object(x.jsx)("td",{children:t.city})]})]})}),Object(x.jsx)("button",{onClick:function(){a&&I(a,t.uuid,!1).then(n)},className:"btn btn-dark",children:"Book"})]})]})})]})})}function q(e){return e*Math.PI/180}function z(e,t,n,c){var a=q(e-n),s=q(t-c),r=Math.sin(a/2)*Math.sin(a/2)+Math.cos(q(e))*Math.cos(q(n))*Math.sin(s/2)*Math.sin(s/2);return 6378137*(2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)))/1e3}function K(){var e=L(),t=Object(i.a)(e,1)[0],n=function(){var e=Object(c.useState)({}),t=Object(i.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(null),r=Object(i.a)(s,2),l=r[0],o=r[1],d=function(e){var t=e.coords;a({latitude:t.latitude,longitude:t.longitude})},u=function(e){o(e.message)};return Object(c.useEffect)((function(){var e=navigator.geolocation;if(e){var t=e.watchPosition(d,u);return function(){return e.clearWatch(t)}}o("Geolocation is not supported")}),[]),{latitude:n.latitude,longitude:n.longitude,error:l}}(),a=n.latitude,s=n.longitude,r=Object(c.useState)(!1),l=Object(i.a)(r,2),o=l[0],b=l[1],h=Object(c.useState)(!1),O=Object(i.a)(h,2),m=O[0],f=O[1],N=Object(c.useState)([]),g=Object(i.a)(N,2),y=g[0],C=g[1],S=Object(c.useState)(""),P=Object(i.a)(S,2),E=P[0],H=P[1],F=Object(c.useState)(0),B=Object(i.a)(F,2),R=B[0],D=B[1],q=Object(c.useState)(""),K=Object(i.a)(q,2),V=K[0],Y=K[1],_=Object(c.useState)(null),Q=Object(i.a)(_,2),X=Q[0],Z=Q[1];function $(e){return ee.apply(this,arguments)}function ee(){return(ee=Object(u.a)(d.a.mark((function e(t){var n,c,r,i,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],c=Object(M.a)(t),e.prev=2,c.s();case 4:if((r=c.n()).done){e.next=12;break}return i=r.value,e.next=8,k(i.host);case 8:l=e.sent,n.push(Object(v.a)(Object(v.a)({},i),{},{distance:z(i.lat,i.long,a,s),user:l}));case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),c.e(e.t0);case 17:return e.prev=17,c.f(),e.finish(17);case 20:return n.sort((function(e,t){return e.distance-t.distance})),e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,null,[[2,14,17,20]])})))).apply(this,arguments)}return Object(c.useEffect)((function(){function e(){return(e=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(y);case 2:t=e.sent,C((function(e){return t}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[a,s]),Object(c.useEffect)((function(){j.firestore().collection("rides").onSnapshot(function(){var e=Object(u.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],t.docs.forEach((function(e){return n.push(e.data())})),e.t0=C,e.next=5,$(n);case 5:e.t1=e.sent,(0,e.t0)(e.t1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(x.jsxs)("div",{className:"section1",children:[Object(x.jsxs)(J.a,{centered:!0,show:null!==X,onHide:function(){Z(null),f(!0)},children:[Object(x.jsxs)(J.a.Header,{closeButton:!0,children:["Book ",null===X||void 0===X?void 0:X.name]}),Object(x.jsx)(J.a.Body,{children:X&&Object(x.jsx)(W,{closeRideInfo:function(){return Z(null)},ride:X})})]}),Object(x.jsxs)(J.a,{centered:!0,show:o,onHide:function(){return b(!1)},children:[Object(x.jsx)(J.a.Header,{closeButton:!0,children:"Host a ride"}),Object(x.jsx)(J.a.Body,{children:Object(x.jsxs)(A.a,{onSubmit:function(e){e.preventDefault();var n=Object(T.a)();t&&function(e){return w.apply(this,arguments)}({name:E,ridersCount:R,city:V,lat:a,long:s,uuid:n,host:null===t||void 0===t?void 0:t.uuid,participants:[]}).then((function(){I(t,n,!0),b(!1),alert("Ride Hosted!")}))},children:[Object(x.jsxs)(A.a.Group,{children:[Object(x.jsx)(A.a.Label,{children:"Ride Name"}),Object(x.jsx)(A.a.Control,{value:E,onChange:function(e){return H(e.target.value)}})]}),Object(x.jsxs)(A.a.Group,{children:[Object(x.jsx)(A.a.Label,{children:"No. of riders"}),Object(x.jsx)(A.a.Control,{value:R,onChange:function(e){return D(parseInt(e.target.value))},type:"number"})]}),Object(x.jsxs)(A.a.Group,{children:[Object(x.jsx)(A.a.Label,{children:"City/Area"}),Object(x.jsx)(A.a.Control,{value:V,onChange:function(e){return Y(e.target.value)}})]}),Object(x.jsx)(G.a,{variant:"dark",className:"rounded-pill",type:"submit",children:"Host Now"})]})})]}),Object(x.jsxs)(J.a,{centered:!0,show:m,onHide:function(){return f(!1)},children:[Object(x.jsx)(J.a.Header,{closeButton:!0,children:"Join a ride"}),Object(x.jsx)(J.a.Body,{children:!X&&y.map((function(e){return Object(x.jsx)("div",{onClick:function(){f(!1),setTimeout((function(){return Z(e)}),100)},children:Object(x.jsx)(U,{ride:e},e.uuid)})}))})]}),Object(x.jsx)("div",{className:"container",id:"base",children:Object(x.jsxs)("div",{className:"row-fluid ",children:[Object(x.jsx)("div",{className:"col-fluid text-center text-inline",children:Object(x.jsxs)("h3",{className:"display-2",children:["Hi,",null===t||void 0===t?void 0:t.name]})}),Object(x.jsx)("br",{}),Object(x.jsxs)("div",{className:"row d-flex flex-row justify-content-around",id:"btncontainer",children:[Object(x.jsx)("div",{className:"col-fluid",children:Object(x.jsx)("button",{type:"button",className:"btn btn-dark",id:"buttonsbox",onClick:function(){return b(!0)},children:"HOST"})}),Object(x.jsx)("div",{className:"col-fluid",children:Object(x.jsx)("button",{onClick:function(){return f(!0)},type:"button",className:"btn btn-dark",id:"buttonsbox",children:"JOIN"})}),Object(x.jsx)("div",{className:"col-fluid",children:Object(x.jsx)("button",{onClick:p,type:"button",className:"btn btn-dark text-wrap",id:"buttonsbox",children:"SIGN OUT"})})]})]})})]})}function V(){return Object(x.jsx)("div",{className:"display-3 d-flex align-items-center justify-content-center min-vh-100",children:"Loading..."})}var Y=function(){var e=L(),t=Object(i.a)(e,1)[0];return void 0===t?Object(x.jsx)(V,{}):Object(x.jsx)(E.a,{children:Object(x.jsxs)(H.d,{children:[Object(x.jsx)(H.b,{exact:!0,path:"/",children:t?Object(x.jsx)(H.a,{to:"/home"}):Object(x.jsx)(B,{})}),Object(x.jsx)(H.b,{path:"/home",children:t?Object(x.jsx)(K,{}):Object(x.jsx)(H.a,{to:"/"})}),Object(x.jsx)(H.b,{path:F.signUp,children:t?Object(x.jsx)(H.a,{to:"/home"}):Object(x.jsx)(P,{})}),Object(x.jsx)(H.b,{path:F.logIn,children:t?Object(x.jsx)(H.a,{to:"/home"}):Object(x.jsx)(m,{})})]})})},_=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,76)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),s(e),r(e)}))};n(63),n(64);r.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(D,{children:Object(x.jsx)(Y,{})})}),document.getElementById("root")),_()}},[[67,1,2]]]);
//# sourceMappingURL=main.0df282f7.chunk.js.map